http:
  middlewares:
    cors-headers:
      headers:
        accessControlAllowOriginList:
          - "http://10.70.95.95:3000"
        accessControlAllowMethods:
          - GET
          - POST
          - PUT
          - DELETE
          - PATCH
          - OPTIONS
        accessControlAllowHeaders:
          - Content-Type
          - Authorization
        accessControlAllowCredentials: true
        addVaryHeader: true

  routers:
    auth-router:
      rule: "PathPrefix(`/accounts/`) || PathPrefix(`/api/token/`)"
      service: auth-service
      middlewares:
        - cors-headers
      priority: 100

    ride-router:
      rule: "PathPrefix(`/api/rides/`) || PathPrefix(`/api/notifications/`)"
      service: ride-service
      middlewares:
        - cors-headers
      priority: 90

  services:
    auth-service:
      loadBalancer:
        servers:
          - url: "http://10.70.95.87:8000"  # PC2 auth service

    ride-service:
      loadBalancer:
        servers:
          - url: "http://10.70.95.49:8001"  # PC2 ride service or wherever it runs
